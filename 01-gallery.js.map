{"version":3,"file":"01-gallery.js","sources":["../src/js/01-gallery.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst API_KEY = '46156340-afe2d6dd24e461f249d973066';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet currentPage = 1;\nlet currentQuery = '';\n\nconst gallery = document.getElementById('gallery');\nconst loadMoreButton = document.getElementById('load-more-btn');\nconst loader = document.getElementById('loader'); // Loader'ı al\n\n// SimpleLightbox başlat\nlet lightbox = new SimpleLightbox('.gallery-item');\n\n// Form submit event listener\ndocument.getElementById('search-form').addEventListener('submit', function (event) {\n  event.preventDefault();\n  const query = document.getElementById('query').value.trim();\n\n  if (query) {\n    currentQuery = query;\n    currentPage = 1; // Yeni arama için sayfa numarasını sıfırla\n    gallery.innerHTML = ''; // Önceki sonuçları temizle\n    loadMoreButton.style.display = 'none'; // Yeni arama sırasında gizle\n    fetchImages(query, currentPage);\n  } else {\n    console.error(\"Lütfen bir arama terimi girin!\");\n  }\n});\n\n// API'den veri alma işlemi (axios ile)\nasync function fetchImages(query, page = 1) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40&page=${page}`;\n\n  loader.style.display = 'block'; // Loader'ı göster\n\n  try {\n    const response = await axios.get(url);\n    if (response.data.hits.length === 0) {\n      console.error(\"Sorry, there are no images matching your search query. Please try again!\");\n      loader.style.display = 'none'; // Loader'ı gizle\n      return;\n    }\n\n    displayImages(response.data.hits);\n\n    // Toplam sonuç sayısını kontrol et\n    const totalHits = response.data.totalHits;\n    const currentDisplayedHits = page * 40; // Şu ana kadar gösterilen sonuçlar (her sayfa 40 sonuç)\n\n    // Daha fazla sonuç varsa \"Load More\" düğmesini göster\n    if (currentDisplayedHits < totalHits) {\n      loadMoreButton.style.display = 'block';\n    } else {\n      loadMoreButton.style.display = 'none';\n      alert(\"We're sorry, but you've reached the end of search results\");\n    }\n\n  } catch (error) {\n    console.error(\"Görseller alınırken bir hata oluştu:\", error);\n  } finally {\n    loader.style.display = 'none'; // İş tamamlandığında loader'ı gizle\n  }\n}\n\n// Görselleri sayfada gösterme işlemi\nfunction displayImages(images) {\n  const galleryItems = images.map(image => {\n    return `\n      <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n        <div class=\"image-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n          <div class=\"image-info\">\n            <p><strong>Beğeniler:</strong> ${image.likes}</p>\n            <p><strong>Görüntüleme:</strong> ${image.views}</p>\n            <p><strong>Yorumlar:</strong> ${image.comments}</p>\n            <p><strong>İndirmeler:</strong> ${image.downloads}</p>\n          </div>\n        </div>\n      </a>\n    `;\n  }).join('');\n\n  gallery.insertAdjacentHTML('beforeend', galleryItems); // Yeni sonuçları ekle\n  lightbox.refresh(); // SimpleLightbox'ı güncelle ve yeni öğeleri tanı\n\n  // Sayfa kaydırma işlemi (2 kart yüksekliğinde)\n  const galleryCard = document.querySelector('.gallery-item');\n  const { height: cardHeight } = galleryCard.getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth'\n  });\n}\n\n// Load More event listener\nloadMoreButton.addEventListener('click', () => {\n  currentPage += 1;\n  fetchImages(currentQuery, currentPage);\n});\n\n"],"names":["API_KEY","BASE_URL","currentPage","currentQuery","gallery","loadMoreButton","loader","lightbox","SimpleLightbox","event","query","fetchImages","page","url","response","axios","displayImages","totalHits","error","images","galleryItems","image","galleryCard","cardHeight"],"mappings":"2GAIA,MAAMA,EAAU,qCACVC,EAAW,2BACjB,IAAIC,EAAc,EACdC,EAAe,GAEnB,MAAMC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAiB,SAAS,eAAe,eAAe,EACxDC,EAAS,SAAS,eAAe,QAAQ,EAG/C,IAAIC,EAAW,IAAIC,EAAe,eAAe,EAGjD,SAAS,eAAe,aAAa,EAAE,iBAAiB,SAAU,SAAUC,EAAO,CACjFA,EAAM,eAAc,EACpB,MAAMC,EAAQ,SAAS,eAAe,OAAO,EAAE,MAAM,OAEjDA,GACFP,EAAeO,EACfR,EAAc,EACdE,EAAQ,UAAY,GACpBC,EAAe,MAAM,QAAU,OAC/BM,EAAYD,EAAOR,CAAW,GAE9B,QAAQ,MAAM,gCAAgC,CAElD,CAAC,EAGD,eAAeS,EAAYD,EAAOE,EAAO,EAAG,CAC1C,MAAMC,EAAM,GAAGZ,CAAQ,QAAQD,CAAO,MAAM,mBAAmBU,CAAK,CAAC,6EAA6EE,CAAI,GAEtJN,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMQ,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,KAAK,KAAK,SAAW,EAAG,CACnC,QAAQ,MAAM,0EAA0E,EACxFR,EAAO,MAAM,QAAU,OACvB,MACD,CAEDU,EAAcF,EAAS,KAAK,IAAI,EAGhC,MAAMG,EAAYH,EAAS,KAAK,UACHF,EAAO,GAGTK,EACzBZ,EAAe,MAAM,QAAU,SAE/BA,EAAe,MAAM,QAAU,OAC/B,MAAM,2DAA2D,EAGpE,OAAQa,EAAO,CACd,QAAQ,MAAM,uCAAwCA,CAAK,CAC/D,QAAY,CACRZ,EAAO,MAAM,QAAU,MACxB,CACH,CAGA,SAASU,EAAcG,EAAQ,CAC7B,MAAMC,EAAeD,EAAO,IAAIE,GACvB;AAAA,iBACMA,EAAM,aAAa;AAAA;AAAA,sBAEdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,6CAEfA,EAAM,KAAK;AAAA,+CACTA,EAAM,KAAK;AAAA,4CACdA,EAAM,QAAQ;AAAA,8CACZA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAK1D,EAAE,KAAK,EAAE,EAEVjB,EAAQ,mBAAmB,YAAagB,CAAY,EACpDb,EAAS,QAAO,EAGhB,MAAMe,EAAc,SAAS,cAAc,eAAe,EACpD,CAAE,OAAQC,CAAY,EAAGD,EAAY,sBAAqB,EAChE,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAGAlB,EAAe,iBAAiB,QAAS,IAAM,CAC7CH,GAAe,EACfS,EAAYR,EAAcD,CAAW,CACvC,CAAC"}